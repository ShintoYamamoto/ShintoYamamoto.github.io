(()=>{"use strict";var t={365:(t,e,n)=>{n.d(e,{A:()=>a});var s=n(601),r=n.n(s),i=n(314),o=n.n(i)()(r());o.push([t.id,":root {\n  font-family: Inter, Avenir, Helvetica, Arial, sans-serif;\n  font-size: 16px;\n  line-height: 24px;\n  font-weight: 400;\n\n  color: #0f0f0f;\n  background-color: #f6f6f6;\n\n  font-synthesis: none;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  -webkit-text-size-adjust: 100%;\n}\nbody{\n  margin: 0px;\n  height: 100vh;\n}\n#app{\n  height: 100%;\n}\na {\n  font-weight: 500;\n  color: #646cff;\n  text-decoration: inherit;\n}\n\na:hover {\n  color: #535bf2;\n}\n\nh1 {\n  text-align: center;\n}\n\ninput,\ntextarea,\nbutton {\n  border-radius: 8px;\n  border: 1px solid transparent;\n  padding: 0.6em 1.2em;\n  font-size: 1em;\n  font-weight: 500;\n  font-family: inherit;\n  color: #0f0f0f;\n  background-color: #ffffff;\n  transition: border-color 0.25s;\n  box-shadow: 0 2px 2px rgba(0, 0, 0, 0.2);\n}\ntextarea {\n  box-shadow: 0 4px 4px rgba(0, 0, 0, 0.3);\n}\n\nbutton {\n  cursor: pointer;\n}\n\nbutton:hover {\n  border-color: #396cd8;\n}\nbutton:active {\n  border-color: #396cd8;\n  background-color: #e8e8e8;\n}\n\ninput,\ntextarea,\nbutton {\n  outline: none;\n}\n\n#greet-input {\n  margin-right: 5px;\n}\n\n@media (prefers-color-scheme: dark) {\n  :root {\n    color: #f6f6f6;\n    background-color: #2f2f2f;\n  }\n\n  a:hover {\n    color: #24c8db;\n  }\n\n  input,\n  textarea,\n  button {\n    color: #ffffff;\n    background-color: #0f0f0f98;\n  }\n  button:active {\n    background-color: #0f0f0f69;\n  }\n}\n",""]);const a=o},375:(t,e,n)=>{n.d(e,{A:()=>a});var s=n(601),r=n.n(s),i=n(314),o=n.n(i)()(r());o.push([t.id,".ask{\n    width: 80%;\n    margin: auto;\n    text-align: center;\n    font-size: 2rem;\n    & > div{\n        margin: 2em;\n    }\n}\n.quesArea{\n}\n.ansArea{\n\n}\n.evalArea{\n    & > button{\n        font-size: 1rem;\n        margin: 0px 1rem;\n    }\n    & > .correct{\n        background-color: rgb(208, 77, 77);\n    }\n    & > .wrong{\n        background-color: #5b5eff;\n    }\n    & > .skip{\n        background-color: #888;\n    }\n\n}",""]);const a=o},694:(t,e,n)=>{n.d(e,{A:()=>a});var s=n(601),r=n.n(s),i=n(314),o=n.n(i)()(r());o.push([t.id,".quesInput{\n    width: 80%;\n    height: 80%;\n    display: block;\n    margin: auto;\n    text-align: center;\n    \n    & > textarea{\n        width: 100%;\n        min-height: 50%;\n        font-size: 1rem;\n        display: block;\n        margin: 2em auto;\n        box-sizing: border-box;\n    }\n    & > .startBtn{\n        display: block;\n        margin: auto;\n        background-color: rgb(70, 165, 255);\n    }\n}",""]);const a=o},732:(t,e,n)=>{n.d(e,{A:()=>a});var s=n(601),r=n.n(s),i=n(314),o=n.n(i)()(r());o.push([t.id,".showStats{\n    width: 80%;\n    margin: auto;\n    text-align: center;\n    & > table{\n        width: 100%;\n        text-align: center;\n        font-size: 1.3rem;\n        padding-top: 2rem;\n        & > tr {\n            border: 1px solid #888;\n            & > td {\n                padding: 1em;\n            }\n        }\n    }\n    & > .backBtn{\n        margin-top: 2em;\n        background-color: #3260f8;\n    }\n}",""]);const a=o},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",s=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),s&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),s&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,s,r,i){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(s)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var h=0;h<t.length;h++){var c=[].concat(t[h]);s&&o[c[0]]||(void 0!==i&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=i),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),r&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=r):c[4]="".concat(r)),e.push(c))}},e}},601:t=>{t.exports=function(t){return t[1]}},788:(t,e,n)=>{n.r(e),n.d(e,{default:()=>g});var s=n(72),r=n.n(s),i=n(825),o=n.n(i),a=n(659),l=n.n(a),h=n(56),c=n.n(h),u=n(540),d=n.n(u),p=n(113),f=n.n(p),m=n(365),v={};v.styleTagTransform=f(),v.setAttributes=c(),v.insert=l().bind(null,"head"),v.domAPI=o(),v.insertStyleElement=d(),r()(m.A,v);const g=m.A&&m.A.locals?m.A.locals:void 0},966:(t,e,n)=>{n.r(e),n.d(e,{default:()=>g});var s=n(72),r=n.n(s),i=n(825),o=n.n(i),a=n(659),l=n.n(a),h=n(56),c=n.n(h),u=n(540),d=n.n(u),p=n(113),f=n.n(p),m=n(375),v={};v.styleTagTransform=f(),v.setAttributes=c(),v.insert=l().bind(null,"head"),v.domAPI=o(),v.insertStyleElement=d(),r()(m.A,v);const g=m.A&&m.A.locals?m.A.locals:void 0},739:(t,e,n)=>{n.r(e),n.d(e,{default:()=>g});var s=n(72),r=n.n(s),i=n(825),o=n.n(i),a=n(659),l=n.n(a),h=n(56),c=n.n(h),u=n(540),d=n.n(u),p=n(113),f=n.n(p),m=n(694),v={};v.styleTagTransform=f(),v.setAttributes=c(),v.insert=l().bind(null,"head"),v.domAPI=o(),v.insertStyleElement=d(),r()(m.A,v);const g=m.A&&m.A.locals?m.A.locals:void 0},533:(t,e,n)=>{n.r(e),n.d(e,{default:()=>g});var s=n(72),r=n.n(s),i=n(825),o=n.n(i),a=n(659),l=n.n(a),h=n(56),c=n.n(h),u=n(540),d=n.n(u),p=n(113),f=n.n(p),m=n(732),v={};v.styleTagTransform=f(),v.setAttributes=c(),v.insert=l().bind(null,"head"),v.domAPI=o(),v.insertStyleElement=d(),r()(m.A,v);const g=m.A&&m.A.locals?m.A.locals:void 0},72:t=>{var e=[];function n(t){for(var n=-1,s=0;s<e.length;s++)if(e[s].identifier===t){n=s;break}return n}function s(t,s){for(var i={},o=[],a=0;a<t.length;a++){var l=t[a],h=s.base?l[0]+s.base:l[0],c=i[h]||0,u="".concat(h," ").concat(c);i[h]=c+1;var d=n(u),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)e[d].references++,e[d].updater(p);else{var f=r(p,s);s.byIndex=a,e.splice(a,0,{identifier:u,updater:f,references:1})}o.push(u)}return o}function r(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,r){var i=s(t=t||[],r=r||{});return function(t){t=t||[];for(var o=0;o<i.length;o++){var a=n(i[o]);e[a].references--}for(var l=s(t,r),h=0;h<i.length;h++){var c=n(i[h]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}i=l}}},659:t=>{var e={};t.exports=function(t,n){var s=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(n)}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},56:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var s="";n.supports&&(s+="@supports (".concat(n.supports,") {")),n.media&&(s+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(s+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),s+=n.css,r&&(s+="}"),n.media&&(s+="}"),n.supports&&(s+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(s,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},859:function(t,e,n){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(100),i=s(n(492)),o=s(n(723)),a=s(n(86));n(788);class l extends r.Narve.Component{constructor(){super("div",{id:"app"}),this.quesInput=new o.default,this.ask=new i.default,this.showStats=new a.default,this.children.set(this.quesInput,this.ask,this.showStats),this.switchState(this.quesInput),this.quesInput.onStartBtnClicked=t=>this.start(t)}start(t){this.switchState(this.ask),this.ask.setQuesSetFromText(t),this.ask.start().then((t=>{this.switchState(this.showStats),this.showStats.show(t),this.showStats.back().then((()=>this.switchState(this.quesInput)))}))}}e.default=l},492:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EvalArea=void 0;const s=n(100),r=n(181);n(966);class i extends s.Narve.Component{constructor(t=[]){super("div",{class:"ask"}),this.quesResolve=t=>{},this.quesArea=new o,this.ansArea=new a,this.evalArea=new l,this.children.set(this.quesArea,this.ansArea,this.evalArea),document.onclick=()=>this.onDocClicked(),this.evalArea.onBtnClicked=t=>this.onEvalBtnClicked(t),this.quesSets=[],this.quesStats=[],this.quesIndex=-1,this.isAsking=!1,this.setQuesSet(t)}start(){return new Promise((t=>{this.quesIndex=-1,this.quesStats=[],this.nextQuestion(),this.quesResolve=t}))}finish(){this.isAsking=!1,this.quesArea.ask("finish!"),this.quesResolve(this.quesStats.sort(((t,e)=>t.id-e.id)))}shuffleQues(){this.quesSets=this.quesSets.map((t=>({data:t,pri:Math.random()}))).sort(((t,e)=>t.pri-e.pri)).map((t=>t.data))}setQuesSet(t){let e=[];try{t.forEach((({id:t})=>{if(e[t])throw Error("The value of 'id' must be unique.");e[t]=!0}))}catch(t){return console.error(t),void console.warn("quesSets didn't change.")}this.quesSets=t,this.shuffleQues(),this.quesIndex=-1}setQuesSetFromText(t){const e=t.split("\n").map((t=>t.replace(/#.*$/,""))).filter((t=>t.length)).map((t=>{const e=t.match(/\s+/g);let n="";null==e||e.forEach((t=>{n=n<t?t:n}));const s=n;if(s.length)return t.split(s)})).filter((t=>void 0!==t)).filter((t=>t.length>=2)).map(((t,e)=>({id:e+1,question:t[0],answer:t[1]})));this.setQuesSet(e)}onDocClicked(){this.isAsking&&this.showAnswer()}onEvalBtnClicked(t){this.setStats(t),this.nextQuestion()}showAnswer(){this.isAsking=!1,this.ansArea.show(this.quesSets[this.quesIndex].answer),this.evalArea.display()}nextQuestion(){this.isAsking=!0,this.ansArea.hide(),this.evalArea.hide(),this.quesIndex++,this.quesIndex>=this.quesSets.length?this.finish():this.quesArea.ask(this.quesSets[this.quesIndex].question)}setStats(t){this.quesIndex>=0&&this.quesIndex<this.quesSets.length&&this.quesStats.push(Object.assign(Object.assign({},this.quesSets[this.quesIndex]),{eval:t}))}}e.default=i;class o extends s.Narve.Component{constructor(){super("div",{class:"quesArea"})}ask(t){this.elem.innerText=t}}class a extends s.Narve.Component{constructor(){super("div",{class:"ansArea"}),this.hide()}show(t){this.elem.innerText=t}hide(){this.elem.innerText=""}}class l extends s.Narve.Component{constructor(){super("div",{class:"evalArea"}),this.correct=(0,s.nr)("button",{class:"correct"},r.evalToStats.get(r.CORRECT_BTN)||""),this.wrong=(0,s.nr)("button",{class:"wrong"},r.evalToStats.get(r.WRONG_BTN)||""),this.skip=(0,s.nr)("button",{class:"skip"},r.evalToStats.get(r.SKIP_BTN)||""),this.children.set(this.wrong,this.skip,this.correct),this.correct.elem.onclick=t=>{t.stopPropagation(),this.onBtnClicked(r.CORRECT_BTN)},this.wrong.elem.onclick=t=>{t.stopPropagation(),this.onBtnClicked(r.WRONG_BTN)},this.skip.elem.onclick=t=>{t.stopPropagation(),this.onBtnClicked(r.SKIP_BTN)}}onBtnClicked(t){}}e.EvalArea=l},723:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});const s=n(100);n(739);class r extends s.Narve.Component{constructor(){super("div",{class:"quesInput"}),this.textArea=(0,s.nr)("textarea"),this.startBtn=(0,s.nr)("button",{class:"startBtn"},"スタート"),this.children.set(this.textArea,this.startBtn),this.startBtn.elem.onclick=t=>{t.stopPropagation(),this.textArea.elem instanceof HTMLTextAreaElement&&this.onStartBtnClicked(this.textArea.elem.value)}}onStartBtnClicked(t){}}e.default=r},86:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});const s=n(100),r=n(181);n(533);class i extends s.Narve.Component{constructor(){super("div",{class:"showStats"}),this.stats=[],this.backBtn=(0,s.nr)("button",{class:"backBtn"},"戻る"),this.statsTable=(0,s.nr)("table"),this.children.set(this.statsTable,this.backBtn)}setStats(t){this.stats=t}display(t){this.statsTable.children.set((0,s.nr)("tr",{},(0,s.nr)("th",{},"id"),(0,s.nr)("th",{},"問題"),(0,s.nr)("th",{},"正答"),(0,s.nr)("th",{},"スタッツ")),...this.stats.map((t=>(0,s.nr)("tr",{},(0,s.nr)("td",{},t.id.toString()),(0,s.nr)("td",{},t.question),(0,s.nr)("td",{},t.answer),(0,s.nr)("td",{},r.evalToStats.get(t.eval)||""))))),super.display(t)}show(t){this.setStats(t),this.display()}back(){return new Promise((t=>{this.backBtn.elem.onclick=t}))}}e.default=i},181:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.evalToStats=e.SKIP_BTN=e.WRONG_BTN=e.CORRECT_BTN=void 0,e.CORRECT_BTN="correct",e.WRONG_BTN="wrong",e.SKIP_BTN="skip",e.evalToStats=new Map,e.evalToStats.set(e.CORRECT_BTN,"正解"),e.evalToStats.set(e.WRONG_BTN,"不正解"),e.evalToStats.set(e.SKIP_BTN,"スキップ")},927:function(t,e,n){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=n(100),i=s(n(859));window.onload=()=>{r.Narve.q("body").children.set(new i.default)}},100:(t,e)=>{function n(t,e,n){void 0===t&&(t="div");let s=document.createElement(t);return e&&Object.entries(e).forEach((([t,e])=>{s.setAttribute(t,e)})),void 0!==n&&(Array.isArray(n)?n.forEach((t=>{s.appendChild(t)})):"string"==typeof n?s.innerHTML=n.replace(/&/g,"&lt;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"):s.appendChild(n)),s}function s(t){let n;try{n=o(t.elem.cloneNode(!0))}catch(n){return console.error("deepClone",t),(0,e.nr)()}return n}function r(t){let e=new i.Component;return e.querySelector(t),e}var i;function o(t){let e=Object();for(let n=0;n<t.attributes.length;n++)e[t.attributes[n].name]=t.attributes[n].value;let n=new i.Component;if(n.elem=t,0===t.children.length)return n;for(let e=0;e<t.children.length;e++)n.children.push(o(t.children[e]));return n}Object.defineProperty(e,"__esModule",{value:!0}),e.Narve=e.nr=void 0,e.nr=function(t,e,...n){return new i.Component(t,e,...n)},function(t){t.q=r;class e{constructor(e,s,...r){this.children=new a(this),this.elem=n(e,s||{}),r.every((e=>e instanceof t.Component))?this.children.set(...r):this.elem.innerHTML=r.join("")}querySelector(t){const e=document.querySelector(t);return null===e?null:(this.elem=e||n("div"),this.children=o(this.elem).children,this)}replaceWith(t){t instanceof e?(this.elem.replaceWith(t.elem),this.elem=t.elem,this.children=t.children):(this.elem.replaceWith(t),this.elem=t,this.children=o(t).children)}removeElem(){this.elem.remove()}switchState(t,e="block"){this.children.forEach((t=>t.hide())),t.display()}display(t="block"){this.elem.style.display=t}hide(){this.elem.style.display="none"}}t.Component=e}(i||(e.Narve=i={}));class a extends Array{constructor(t){super(),Object.setPrototypeOf(this,a.prototype),this.parent=t}copyWithin(t,e,n){if(t=this.__REG_START__(t),e=this.__REG_START__(e),n=this.__REG_END__(n),e>=this.length)return this;if(n<=e)return this;if(t===e)return this;if(t<e)for(let s=0;s<n-e&&!(s+e>=this.length)&&!(s+t>=this.length);s++)this.replace(s+t,this[s+e]);else for(let s=n-e-1;s>=0;s--)s+e>=this.length||s+t>=this.length||this.replace(s+t,this[s+e]);return this}fill(t,e,n){if(e=this.__REG_START__(e),n=this.__REG_END__(n),e>=this.length||n<=e)return this;for(let s=e;s<n;s++)this.replace(s,t);return this}pop(){const t=super.pop();if(void 0!==t)return t.removeElem(),t}push(...t){return super.push(...t),t.forEach((t=>{this.parent.elem.insertAdjacentElement("beforeend",t.elem)})),this.length}reverse(){let t=0,e=this.length-1;for(;e-t>0;){const n=s(this[t]);this.replace(t,s(this[e])),this.replace(e,n),t++,e--}return this}shift(){const t=super.shift();if(void 0!==t)return t.removeElem(),t}sort(t){return[...this.map((t=>s(t)))].sort(((e,n)=>t(e,n))).forEach(((t,e)=>this.replace(e,t))),this}splice(t,e,...n){return this.delete(t,e),this.insert(t,...n),this}unshift(...t){return t.forEach((t=>this.parent.elem.insertAdjacentElement("afterbegin",t.elem))),super.unshift(...t),this.length}replace(t,e){(t=this.__REG_START__(t))>=this.length&&(t=this.length-1),this[t].replaceWith(e.elem.isConnected?s(e):e)}delete(t,e){if((t=this.__REG_START__(t))>=this.length)return[];void 0===e&&(e=this.length-t);const n=super.splice(t,e);return n.forEach((t=>t.removeElem())),n}insert(t,...e){if((t=this.__REG_START__(t))>=this.length)return console.warn('The value of index is too large. "insert" is regarded as "append"'),void this.push(...e);const n=this[t].elem;return e.forEach((t=>{n.before(t.elem)})),super.splice(t,0,...e),this}set(...t){this.delete(0),this.push(...t)}__REG_START__(t){return void 0===t&&(t=0),t<0&&(t+=this.length),t<0&&(t=0),t}__REG_END__(t){return(void 0===t||t>=this.length)&&(t=this.length),t<0&&(t+=this.length),t<0&&(t=0),t}}}},e={};function n(s){var r=e[s];if(void 0!==r)return r.exports;var i=e[s]={id:s,exports:{}};return t[s].call(i.exports,i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nc=void 0,n(927)})();
