(()=>{"use strict";var e={365:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(601),i=n.n(s),r=n(314),o=n.n(r)()(i());o.push([e.id,":root {\n  font-family: Inter, Avenir, Helvetica, Arial, sans-serif;\n  font-size: 16px;\n  line-height: 24px;\n  font-weight: 400;\n\n  color: #0f0f0f;\n  background-color: #f6f6f6;\n\n  font-synthesis: none;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  -webkit-text-size-adjust: 100%;\n\n  color-scheme: light dark;\n}\nbody{\n  margin: 0px;\n  height: 100vh;\n}\n#app{\n  height: 100%;\n  & > .pages{\n    height: 100%\n  }\n}\na {\n  font-weight: 500;\n  color: #646cff;\n  text-decoration: inherit;\n}\n\na:hover {\n  color: #535bf2;\n}\n\nh1 {\n  text-align: center;\n}\nul{\n  padding: 0px 0.5rem;\n}\nli {\n  list-style-type: none;\n  padding: 0.5rem 1rem;\n}\ninput,\ntextarea,\nbutton {\n  border-radius: 8px;\n  border: 1px solid transparent;\n  padding: 0.6em 1.2em;\n  font-size: 1em;\n  font-weight: 500;\n  font-family: inherit;\n  color: #0f0f0f;\n  background-color: #ffffff;\n  transition: border-color 0.25s;\n  box-shadow: 0 2px 2px rgba(0, 0, 0, 0.2);\n}\ntextarea {\n  box-shadow: 0 4px 4px rgba(0, 0, 0, 0.3);\n}\n\nbutton {\n  cursor: pointer;\n}\n\nbutton:hover {\n  border-color: #396cd8;\n}\nbutton:active {\n  border-color: #396cd8;\n  background-color: #e8e8e8;\n}\n\ninput,\ntextarea,\nbutton {\n  outline: none;\n}\n\n#greet-input {\n  margin-right: 5px;\n}\n\n@media (prefers-color-scheme: dark) {\n  :root {\n    color: #f6f6f6;\n    background-color: #2f2f2f;\n  }\n\n  a:hover {\n    color: #24c8db;\n  }\n\n  input,\n  textarea,\n  button {\n    color: #ffffff;\n    background-color: #0f0f0f98;\n  }\n  button:active {\n    background-color: #0f0f0f69;\n  }\n}\n",""]);const a=o},375:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(601),i=n.n(s),r=n(314),o=n.n(r)()(i());o.push([e.id,".ask{\n    width: 80%;\n    margin: auto;\n    text-align: center;\n    font-size: 2rem;\n    & > div{\n        margin: 2em;\n        &.evalArea{\n            margin: 2em 0px;\n            display: flex;\n            justify-content: space-between;\n            & > button{\n                font-size: 1rem;\n            }\n            & > .correct{\n                background-color: rgb(208, 77, 77);\n            }\n            & > .wrong{\n                background-color: #5b5eff;\n            }\n            & > .skip{\n                background-color: #888;\n            }\n        }\n    }\n}",""]);const a=o},692:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(601),i=n.n(s),r=n(314),o=n.n(r)()(i());o.push([e.id,".dialogBack {\n    position: fixed;\n    top: 0px;\n    left: 0px;\n    width: 100vw;\n    height: 100vh;\n    background-color: rgba(0,0,0,0.5);\n    opacity: 0;\n    transition-duration: 300ms;\n    transition-property: opacity;\n    transition-timing-function: ease;\n    &.open{\n        opacity: 1;\n    }\n    & > div {\n        max-width: 80%;\n        max-height: 90%;\n        min-height: 50%;\n        height: fit-content;\n        background-color: light-dark(#eee,#222);\n        position: absolute;\n        top: 0px;\n        left: 0px;\n        right: 0px;\n        bottom: 0px;\n        margin: auto;\n        border-radius: 2rem;\n        box-shadow: 2px 4px 4px rgba(0,0,0,0.5);\n        padding: 2rem 3rem;\n        box-sizing: border-box;\n    }\n}",""]);const a=o},393:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(601),i=n.n(s),r=n(314),o=n.n(r)()(i());o.push([e.id,".fileMenu{\n    position: fixed;\n    background-color: light-dark(#d8d8d8,#282828);\n    & > ul{\n        & > li{\n            transition: background-color 0.3s ease;\n            &:hover{\n                background-color: #222;\n            }\n        }\n    }\n}",""]);const a=o},694:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(601),i=n.n(s),r=n(314),o=n.n(r)()(i());o.push([e.id,".quesInput{\n    width: 80%;\n    height: 80%;\n    display: block;\n    margin: auto;\n    text-align: center;\n    padding-top: 2rem;\n\n    & > .fileSaveArea {\n        width: 100%;\n        display: flex;\n        justify-content: space-between;\n        & > .fileNameInput {\n            width: calc(100% - 5rem*2 - 2rem);\n            box-sizing: border-box;\n        }\n        & > button{\n            width: 5rem;\n            font-size: 1rem;\n            padding: 0.5rem 1rem;\n            box-sizing: border-box;\n        }\n        & > .saveBtn {\n            background-color: rgb(70, 165, 255);\n        }\n        & > .readBtn {\n            background-color: rgb(61, 153, 78);\n        }\n    }\n    \n    & > textarea{\n        width: 100%;\n        min-height: 50%;\n        font-size: 1rem;\n        display: block;\n        margin: 2em auto;\n        box-sizing: border-box;\n    }\n    & > .startBtn{\n        display: block;\n        margin: auto;\n        background-color: rgb(70, 165, 255);\n    }\n}",""]);const a=o},676:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(601),i=n.n(s),r=n(314),o=n.n(r)()(i());o.push([e.id,".fileNameList {\n    font-size: 1.2rem;\n    padding: 0px;\n    & > li {\n        display: flex;\n        justify-content: space-between;\n        padding: 0.5rem;\n        transition: background-color 0.3s ease;\n        &:hover{\n            background-color: light-dark(#ddd,#333);\n        }\n        & > span{\n            max-width: calc(100% - 1em);\n            overflow-x: scroll;\n            &::-webkit-scrollbar{\n                width: 0px;\n            }\n        }\n    }\n}",""]);const a=o},732:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(601),i=n.n(s),r=n(314),o=n.n(r)()(i());o.push([e.id,".showStats{\n    width: 80%;\n    margin: auto;\n    text-align: center;\n    & > table{\n        width: 100%;\n        text-align: center;\n        padding-top: 2rem;\n        & > tr {\n            border: 1px solid #888;\n            & > td {\n                padding: 0.5rem;\n                & > span{\n                    padding: 0.5rem 1rem;\n                    border-radius: 0.25rem;\n                }\n                &.correct > span{\n                    padding: 0.5rem 2rem; /* クソコード */\n                    background-color: rgb(208, 77, 77);\n                }\n                &.wrong > span{\n                    padding: 0.5rem 1.5rem; /* クソコード */\n                    background-color: #5b5eff;\n                }\n                &.skip > span{\n                    background-color: #888;\n                }\n            }\n        }\n    }\n    & > .backBtn{\n        margin-top: 2em;\n        background-color: #3260f8;\n    }\n}",""]);const a=o},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",s=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),s&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),s&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,s,i,r){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(s)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var c=0;c<e.length;c++){var h=[].concat(e[c]);s&&o[h[0]]||(void 0!==r&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=r),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),i&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=i):h[4]="".concat(i)),t.push(h))}},t}},601:e=>{e.exports=function(e){return e[1]}},788:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var s=n(72),i=n.n(s),r=n(825),o=n.n(r),a=n(659),l=n.n(a),c=n(56),h=n.n(c),u=n(540),d=n.n(u),p=n(113),f=n.n(p),m=n(365),g={};g.styleTagTransform=f(),g.setAttributes=h(),g.insert=l().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=d(),i()(m.A,g);const v=m.A&&m.A.locals?m.A.locals:void 0},966:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var s=n(72),i=n.n(s),r=n(825),o=n.n(r),a=n(659),l=n.n(a),c=n(56),h=n.n(c),u=n(540),d=n.n(u),p=n(113),f=n.n(p),m=n(375),g={};g.styleTagTransform=f(),g.setAttributes=h(),g.insert=l().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=d(),i()(m.A,g);const v=m.A&&m.A.locals?m.A.locals:void 0},581:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var s=n(72),i=n.n(s),r=n(825),o=n.n(r),a=n(659),l=n.n(a),c=n(56),h=n.n(c),u=n(540),d=n.n(u),p=n(113),f=n.n(p),m=n(692),g={};g.styleTagTransform=f(),g.setAttributes=h(),g.insert=l().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=d(),i()(m.A,g);const v=m.A&&m.A.locals?m.A.locals:void 0},730:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var s=n(72),i=n.n(s),r=n(825),o=n.n(r),a=n(659),l=n.n(a),c=n(56),h=n.n(c),u=n(540),d=n.n(u),p=n(113),f=n.n(p),m=n(393),g={};g.styleTagTransform=f(),g.setAttributes=h(),g.insert=l().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=d(),i()(m.A,g);const v=m.A&&m.A.locals?m.A.locals:void 0},739:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var s=n(72),i=n.n(s),r=n(825),o=n.n(r),a=n(659),l=n.n(a),c=n(56),h=n.n(c),u=n(540),d=n.n(u),p=n(113),f=n.n(p),m=n(694),g={};g.styleTagTransform=f(),g.setAttributes=h(),g.insert=l().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=d(),i()(m.A,g);const v=m.A&&m.A.locals?m.A.locals:void 0},795:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var s=n(72),i=n.n(s),r=n(825),o=n.n(r),a=n(659),l=n.n(a),c=n(56),h=n.n(c),u=n(540),d=n.n(u),p=n(113),f=n.n(p),m=n(676),g={};g.styleTagTransform=f(),g.setAttributes=h(),g.insert=l().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=d(),i()(m.A,g);const v=m.A&&m.A.locals?m.A.locals:void 0},533:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var s=n(72),i=n.n(s),r=n(825),o=n.n(r),a=n(659),l=n.n(a),c=n(56),h=n.n(c),u=n(540),d=n.n(u),p=n(113),f=n.n(p),m=n(732),g={};g.styleTagTransform=f(),g.setAttributes=h(),g.insert=l().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=d(),i()(m.A,g);const v=m.A&&m.A.locals?m.A.locals:void 0},72:e=>{var t=[];function n(e){for(var n=-1,s=0;s<t.length;s++)if(t[s].identifier===e){n=s;break}return n}function s(e,s){for(var r={},o=[],a=0;a<e.length;a++){var l=e[a],c=s.base?l[0]+s.base:l[0],h=r[c]||0,u="".concat(c," ").concat(h);r[c]=h+1;var d=n(u),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)t[d].references++,t[d].updater(p);else{var f=i(p,s);s.byIndex=a,t.splice(a,0,{identifier:u,updater:f,references:1})}o.push(u)}return o}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var r=s(e=e||[],i=i||{});return function(e){e=e||[];for(var o=0;o<r.length;o++){var a=n(r[o]);t[a].references--}for(var l=s(e,i),c=0;c<r.length;c++){var h=n(r[c]);0===t[h].references&&(t[h].updater(),t.splice(h,1))}r=l}}},659:e=>{var t={};e.exports=function(e,n){var s=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(n)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var s="";n.supports&&(s+="@supports (".concat(n.supports,") {")),n.media&&(s+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(s+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),s+=n.css,i&&(s+="}"),n.media&&(s+="}"),n.supports&&(s+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(s,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},859:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(100),r=s(n(492)),o=s(n(723)),a=s(n(86));n(788);const l=s(n(799));class c extends i.Narve.Component{constructor(){super("div",{id:"app"}),this.pages=(0,i.nr)("div",{class:"pages"}),this.ask=new r.default,this.showStats=new a.default,this.quesInput=new o.default((()=>this.readFileDialog.open())),this.pages.children.set(this.quesInput,this.ask,this.showStats),this.readFileDialog=new l.default(((e,t)=>this.quesInput.readFile(e,t))),this.children.set(this.pages,this.readFileDialog),this.pages.switchState(this.quesInput),this.quesInput.onStartBtnClicked=e=>this.start(e)}start(e){this.pages.switchState(this.ask),this.ask.setQuesSetFromText(e),this.ask.start().then((e=>{this.pages.switchState(this.showStats),this.showStats.show(e),this.showStats.back().then((()=>this.pages.switchState(this.quesInput)))}))}}t.default=c},492:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EvalArea=void 0;const s=n(100),i=n(181);n(966);class r extends s.Narve.Component{constructor(e=[]){super("div",{class:"ask"}),this.quesResolve=e=>{},this.quesArea=new o,this.ansArea=new a,this.evalArea=new l,this.children.set(this.quesArea,this.ansArea,this.evalArea),document.onclick=()=>this.onDocClicked(),this.evalArea.onBtnClicked=e=>this.onEvalBtnClicked(e),this.quesSets=[],this.quesStats=[],this.quesIndex=-1,this.isAsking=!1,this.setQuesSet(e)}start(){return new Promise((e=>{this.quesIndex=-1,this.quesStats=[],this.nextQuestion(),this.quesResolve=e}))}finish(){this.isAsking=!1,this.quesArea.ask("finish!"),this.quesResolve(this.quesStats.sort(((e,t)=>e.id-t.id)))}shuffleQues(){this.quesSets=this.quesSets.map((e=>({data:e,pri:Math.random()}))).sort(((e,t)=>e.pri-t.pri)).map((e=>e.data))}setQuesSet(e){let t=[];try{e.forEach((({id:e})=>{if(t[e])throw Error("The value of 'id' must be unique.");t[e]=!0}))}catch(e){return console.error(e),void console.warn("quesSets didn't change.")}this.quesSets=e,this.shuffleQues(),this.quesIndex=-1}setQuesSetFromText(e){const t=e.split("\n").map((e=>e.replace(/#.*$/,""))).filter((e=>e.length)).map((e=>{const t=e.match(/[\s　]+/g);let n="";null==t||t.forEach((e=>{n=n<e?e:n}));const s=n;if(s.length)return e.split(s)})).filter((e=>void 0!==e)).filter((e=>e.length>=2)).map(((e,t)=>({id:t+1,question:e[0],answer:e[1]})));this.setQuesSet(t)}onDocClicked(){this.isAsking&&this.showAnswer()}onEvalBtnClicked(e){this.setStats(e),this.nextQuestion()}showAnswer(){this.isAsking=!1,this.ansArea.show(this.quesSets[this.quesIndex].answer),this.evalArea.display("flex")}nextQuestion(){this.isAsking=!0,this.ansArea.hide(),this.evalArea.hide(),this.quesIndex++,this.quesIndex>=this.quesSets.length?this.finish():this.quesArea.ask(this.quesSets[this.quesIndex].question)}setStats(e){this.quesIndex>=0&&this.quesIndex<this.quesSets.length&&this.quesStats.push(Object.assign(Object.assign({},this.quesSets[this.quesIndex]),{eval:e}))}}t.default=r;class o extends s.Narve.Component{constructor(){super("div",{class:"quesArea"})}ask(e){this.elem.innerText=e}}class a extends s.Narve.Component{constructor(){super("div",{class:"ansArea"}),this.hide()}show(e){this.elem.innerText=e}hide(){this.elem.innerText=""}}class l extends s.Narve.Component{constructor(){super("div",{class:"evalArea"}),this.correct=(0,s.nr)("button",{class:"correct"},i.evalToStats.get(i.CORRECT_BTN)||""),this.wrong=(0,s.nr)("button",{class:"wrong"},i.evalToStats.get(i.WRONG_BTN)||""),this.skip=(0,s.nr)("button",{class:"skip"},i.evalToStats.get(i.SKIP_BTN)||""),this.children.set(this.wrong,this.skip,this.correct),this.correct.elem.onclick=e=>{e.stopPropagation(),this.onBtnClicked(i.CORRECT_BTN)},this.wrong.elem.onclick=e=>{e.stopPropagation(),this.onBtnClicked(i.WRONG_BTN)},this.skip.elem.onclick=e=>{e.stopPropagation(),this.onBtnClicked(i.SKIP_BTN)}}onBtnClicked(e){}}t.EvalArea=l},813:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=n(100);n(581);class i extends s.Narve.Component{constructor(){super("div",{class:"dialogBack"}),this.duration=300,this.timeOut=null,this.elem.style.transitionDuration=this.duration+"ms",this.elem.onclick=()=>{this.close()},this.close()}setContents(e){this.children.set(e),e.elem.onclick=e=>{e.stopPropagation()}}open(){this.timeOut&&clearTimeout(this.timeOut),this.display(),setTimeout((()=>{this.elem.classList.add("open")}),1)}close(){this.elem.classList.remove("open"),this.timeOut=setTimeout((()=>{this.hide()}),this.duration)}}t.default=i},723:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=n(100);n(739);const i=n(181);class r extends s.Narve.Component{constructor(e){super("div",{class:"quesInput"}),this.fileNameInput=(0,s.nr)("input",{class:"fileNameInput",placeholder:"問題セット名"}),this.saveBtn=(0,s.nr)("button",{class:"saveBtn"},"保存"),this.readBtn=(0,s.nr)("button",{class:"readBtn"},"読込"),this.fileSaveArea=(0,s.nr)("div",{class:"fileSaveArea"},this.fileNameInput,this.saveBtn,this.readBtn),this.textArea=(0,s.nr)("textarea"),this.startBtn=(0,s.nr)("button",{class:"startBtn"},"スタート"),this.children.set(this.fileSaveArea,this.textArea,this.startBtn),this.startBtn.elem.onclick=e=>{e.stopPropagation(),this.textArea.elem instanceof HTMLTextAreaElement&&this.onStartBtnClicked(this.textArea.elem.value)},this.saveBtn.elem.onclick=e=>{e.stopPropagation(),this.fileNameInput.elem instanceof HTMLInputElement&&this.textArea.elem instanceof HTMLTextAreaElement&&this.onSaveBtnClicked(this.fileNameInput.elem.value,this.textArea.elem.value)},this.readBtn.elem.onclick=()=>{e()}}onStartBtnClicked(e){}onSaveBtnClicked(e,t){i.LocalData.write(e,t)}readFile(e,t){this.fileNameInput.elem instanceof HTMLInputElement&&(this.fileNameInput.elem.value=e),this.textArea.elem instanceof HTMLTextAreaElement&&(this.textArea.elem.value=t)}}t.default=r},622:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=n(100);n(730);class i extends s.Narve.Component{constructor(e){super("div",{class:"fileMenu"},(0,s.nr)("ul",{},...e.map((e=>{const t=(0,s.nr)("li",{},e.name);return t.elem.onclick=()=>{e.command(this.targetComponent),this.close()},t})))),this.targetComponent=null,this.isOpen=!1,this.elem.onclick=e=>e.stopPropagation(),this.close()}toggle(e,t,n){this.isOpen?this.close():this.open(e,t,n)}open(e,t,n){this.targetComponent=n||null,this.display(),this.moveTo(e,t),this.isOpen=!0}moveTo(e,t){this.elem.style.top=t+"px",this.elem.style.left=e-this.elem.getBoundingClientRect().width+"px"}close(){this.hide(),this.isOpen=!1}}t.default=i},799:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(100),r=s(n(813)),o=n(181);n(795);const a=s(n(622));class l extends r.default{constructor(e){super(),this.contents=(0,i.nr)(),this.fnList=(0,i.nr)("ul",{class:"fileNameList"}),this.menues=[{name:"削除",command:e=>{e&&e instanceof c&&(o.LocalData.remove(e.filename),this.reload())}},{name:"名前を変更",command:e=>{if(e&&e instanceof c){const t=prompt("新しい問題セット名を入力してください");console.log(t),t&&(o.LocalData.rename(e.filename,t),this.reload())}}}],this.fileMenu=new a.default(this.menues),super.setContents(this.contents),this.contents.children.set(this.fnList,this.fileMenu),this.readFile=e}open(){super.open(),this.reload()}close(){var e;super.close(),null===(e=this.fileMenu)||void 0===e||e.close()}reload(){const e=o.LocalData.read();null!==e&&this.fnList.children.set(...Object.entries(e).map((([e,t])=>{const n=new c(e);return n.onMenuBtnClicked=()=>{const e=n.elem.getBoundingClientRect(),t=e.x+e.width,s=e.y+e.height;this.fileMenu.toggle(t,s,n)},n.elem.onclick=()=>{this.readFile(e,t.data),this.close()},n})))}}t.default=l;class c extends i.Narve.Component{constructor(e){super("li",{},(0,i.nr)("span",{},(0,o.escapeHTML)(e))),this.fileMenuBtn=(0,i.nr)("div",{class:"fileMenuBtn"},"⁝"),this.children.push(this.fileMenuBtn),this.filename=e,this.elem.onclick=e=>{e.stopPropagation(),this.onclick()},this.fileMenuBtn.elem.onclick=e=>{e.stopPropagation(),this.onMenuBtnClicked()}}onclick(){}onMenuBtnClicked(){}}},86:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=n(100),i=n(181);n(533);class r extends s.Narve.Component{constructor(){super("div",{class:"showStats"}),this.stats=[],this.backBtn=(0,s.nr)("button",{class:"backBtn"},"戻る"),this.statsTable=(0,s.nr)("table"),this.children.set(this.statsTable,this.backBtn)}setStats(e){this.stats=e}display(e){this.statsTable.children.set((0,s.nr)("tr",{},(0,s.nr)("th",{},"id"),(0,s.nr)("th",{},"問題"),(0,s.nr)("th",{},"正答"),(0,s.nr)("th",{},"スタッツ")),...this.stats.map((e=>(0,s.nr)("tr",{},(0,s.nr)("td",{},e.id.toString()),(0,s.nr)("td",{},e.question),(0,s.nr)("td",{},e.answer),(0,s.nr)("td",{class:e.eval},(0,s.nr)("span",{},i.evalToStats.get(e.eval)||"")))))),super.display(e)}show(e){this.setStats(e),this.display()}back(){return new Promise((e=>{this.backBtn.elem.onclick=e}))}}t.default=r},181:(e,t)=>{function n(e){return null!==e&&"object"==typeof e&&0===Object.values(e).length||!!Object.values(e).every((e=>function(e){return null!==e&&"object"==typeof e&&"data"in e&&"string"==typeof e.data}(e)))}Object.defineProperty(t,"__esModule",{value:!0}),t.LocalData=t.evalToStats=t.SKIP_BTN=t.WRONG_BTN=t.CORRECT_BTN=void 0,t.escapeHTML=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},t.CORRECT_BTN="correct",t.WRONG_BTN="wrong",t.SKIP_BTN="skip",t.evalToStats=new Map,t.evalToStats.set(t.CORRECT_BTN,"正解"),t.evalToStats.set(t.WRONG_BTN,"不正解"),t.evalToStats.set(t.SKIP_BTN,"スキップ");const s="quesData";var i;!function(e){function t(e,t,i=!0){if(""===e)return alert("問題セット名を入力してください"),null;if(""===t)return alert("問題セットを入力してください"),null;console.log("write",e,t);const r=JSON.parse(localStorage.getItem(s)||"{}");if(n(r)){if(e in r&&!confirm(`問題セット「${e}」は既に存在します。\n上書きしますか`))return null;"string"==typeof t?r[e]={data:t}:(r[e]=Object.assign({},t),console.log(r))}return localStorage.setItem(s,JSON.stringify(r)),i&&alert("保存完了しました"),r}e.write=t,e.read=function(){const e=JSON.parse(localStorage.getItem(s)||"{}");return n(e)?e:null},e.remove=function(e){if(confirm(`問題セット「${e}」を削除します。\nよろしいですか？`)){let t=JSON.parse(localStorage.getItem(s)||"{}");n(t)&&e in t&&delete t[e],localStorage.setItem(s,JSON.stringify(t)),alert("削除しました")}},e.rename=function(e,i){let r=JSON.parse(localStorage.getItem(s)||"{}");if(n(r)&&e in r){const n=t(i,Object.assign({},r[e]),!1);if(!n)return;r=n,delete r[e]}localStorage.setItem(s,JSON.stringify(r)),alert("名前を変更しました")}}(i||(t.LocalData=i={}))},927:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(100),r=s(n(859));window.onload=()=>{i.Narve.q("body").children.set(new r.default)}},100:(e,t)=>{function n(e,t,n){void 0===e&&(e="div");let s=document.createElement(e);return t&&Object.entries(t).forEach((([e,t])=>{s.setAttribute(e,t),console.log(e,t)})),void 0!==n&&(Array.isArray(n)?n.forEach((e=>{s.appendChild(e)})):"string"==typeof n?s.innerHTML=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"):s.appendChild(n)),s}function s(e){let n;try{n=o(e.elem.cloneNode(!0))}catch(n){return console.error("deepClone",e),(0,t.nr)()}return n}function i(e){let t=new r.Component;return t.querySelector(e),t}var r;function o(e){let t=Object();for(let n=0;n<e.attributes.length;n++)t[e.attributes[n].name]=e.attributes[n].value;let n=new r.Component;if(n.elem=e,0===e.children.length)return n;for(let t=0;t<e.children.length;t++)n.children.push(o(e.children[t]));return n}Object.defineProperty(t,"__esModule",{value:!0}),t.Narve=t.nr=void 0,t.nr=function(e,t,...n){return new r.Component(e,t,...n)},function(e){e.q=i;class t{constructor(t,s,...i){this.children=new a(this),this.elem=n(t,s||{}),i.every((t=>t instanceof e.Component))?this.children.set(...i):this.elem.innerHTML=i.join("")}querySelector(e){const t=document.querySelector(e);return null===t?null:(this.elem=t||n("div"),this.children=o(this.elem).children,this)}replaceWith(e){e instanceof t?(this.elem.replaceWith(e.elem),this.elem=e.elem,this.children=e.children):(this.elem.replaceWith(e),this.elem=e,this.children=o(e).children)}removeElem(){this.elem.remove()}switchState(e,t="block"){this.children.forEach((e=>e.hide())),e.display()}display(e="block"){this.elem.style.display=e}hide(){this.elem.style.display="none"}}e.Component=t}(r||(t.Narve=r={}));class a extends Array{constructor(e){super(),Object.setPrototypeOf(this,a.prototype),this.parent=e}copyWithin(e,t,n){if(e=this.__REG_START__(e),t=this.__REG_START__(t),n=this.__REG_END__(n),t>=this.length)return this;if(n<=t)return this;if(e===t)return this;if(e<t)for(let s=0;s<n-t&&!(s+t>=this.length)&&!(s+e>=this.length);s++)this.replace(s+e,this[s+t]);else for(let s=n-t-1;s>=0;s--)s+t>=this.length||s+e>=this.length||this.replace(s+e,this[s+t]);return this}fill(e,t,n){if(t=this.__REG_START__(t),n=this.__REG_END__(n),t>=this.length||n<=t)return this;for(let s=t;s<n;s++)this.replace(s,e);return this}pop(){const e=super.pop();if(void 0!==e)return e.removeElem(),e}push(...e){return super.push(...e),e.forEach((e=>{this.parent.elem.insertAdjacentElement("beforeend",e.elem)})),this.length}reverse(){let e=0,t=this.length-1;for(;t-e>0;){const n=s(this[e]);this.replace(e,s(this[t])),this.replace(t,n),e++,t--}return this}shift(){const e=super.shift();if(void 0!==e)return e.removeElem(),e}sort(e){return[...this.map((e=>s(e)))].sort(((t,n)=>e(t,n))).forEach(((e,t)=>this.replace(t,e))),this}splice(e,t,...n){return this.delete(e,t),this.insert(e,...n),this}unshift(...e){return e.forEach((e=>this.parent.elem.insertAdjacentElement("afterbegin",e.elem))),super.unshift(...e),this.length}replace(e,t){(e=this.__REG_START__(e))>=this.length&&(e=this.length-1),this[e].replaceWith(t.elem.isConnected?s(t):t)}delete(e,t){if((e=this.__REG_START__(e))>=this.length)return[];void 0===t&&(t=this.length-e);const n=super.splice(e,t);return n.forEach((e=>e.removeElem())),n}insert(e,...t){if((e=this.__REG_START__(e))>=this.length)return console.warn('The value of index is too large. "insert" is regarded as "append"'),void this.push(...t);const n=this[e].elem;return t.forEach((e=>{n.before(e.elem)})),super.splice(e,0,...t),this}set(...e){this.delete(0),this.push(...e)}__REG_START__(e){return void 0===e&&(e=0),e<0&&(e+=this.length),e<0&&(e=0),e}__REG_END__(e){return(void 0===e||e>=this.length)&&(e=this.length),e<0&&(e+=this.length),e<0&&(e=0),e}}}},t={};function n(s){var i=t[s];if(void 0!==i)return i.exports;var r=t[s]={id:s,exports:{}};return e[s].call(r.exports,r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nc=void 0,n(927)})();
